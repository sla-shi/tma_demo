<!DOCTYPE html>
<html lang="en">
<head>
    <title id="gameTitle">Mini Game</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clicker Game</title>
    <!-- React and ReactDOM CDN - Load these first -->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <!-- SDK script - Load after React -->
    <script>
        window.React = React;  // Ensure SDK uses the same React instance
        window.ReactDOM = ReactDOM;
    </script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // Wallet address mapping
        const gameWalletAddresses = {
            cosmicClicker: 'cRWKKkEt%2BiU82zuXuYbeHC292NMMGAu4KesHGNLe6Sc%3D',
            forestFriend: 'QnLOYksIDhA3MfBLoRL%2ByIa8jRggeovB3NtN3d7LD7g%3D',
            balloonBopper: 'QnLOYksIDhA3MfBLoRL%2ByIa8jRggeovB3NtN3d7LD7g%3D',
            deepSeaClicker: 'QnLOYksIDhA3MfBLoRL%2ByIa8jRggeovB3NtN3d7LD7g%3D'
        };

        // Function to get the game type from URL parameter
        function getGameType() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('game') || 'cosmicClicker';
        }

        // Function to get the wallet address based on the game type
        function getWalletAddress(gameType) {
            return gameWalletAddresses[gameType] || gameWalletAddresses.cosmicClicker;
        }

        // Function to load BEC script with the correct wallet address
        function loadBECScript(gameType) {
            const walletAddress = getWalletAddress(gameType);
            const encodedWalletAddress = walletAddress; //encodeURIComponent(walletAddress);
            const becScriptUrl = `https://tma-demo.dmtp.tech/sdk/0.0.3/bec.js?walletAddress=${encodedWalletAddress}`;

            const script = document.createElement('script');
            script.src = becScriptUrl;
            script.async = true;
            document.head.appendChild(script);

            console.log('BEC script loaded with wallet address:', walletAddress);
        }

        // Load BEC script immediately
        loadBECScript(getGameType());
    </script>
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <style>
        #eruda {
            z-index: 1000000 !important;
        }
        #eruda-style {
            z-index: 1000000 !important;
        }
        #game-container {
            z-index: 1;
        }
    </style>
    <script>
        eruda.init({
            tool: ['console', 'elements', 'network', 'resources', 'info'],
            useShadowDom: false,
            container: document.body,
            autoScale: true,
            defaults: {
                displaySize: 50,
                transparency: 0.9,
                theme: 'Monokai Pro'
            }
        });
        // eruda.show();
        eruda.position({x: 10, y: 10});
        eruda.scale(0.8);
    </script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background-color: #0a1929; /* Dark blue color for the entire page */
        }
        #exchangeBanner {
            width: 320px;
            height: 50px;
            margin: 0 auto;
            background-color: #0a1929;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #game-container {
            width: 100%;
            height: calc(100% - 50px);
            position: relative;
        }
    </style>
</head>
<body>
    <div id="exchangeBanner">Ad Banner Placeholder</div>
    <div id="game-container"></div>
   
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Your game script - Load last -->
    <script type="text/babel" src="game.js"></script>
    
</body>
</html>
